<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbitrum 2048 by ImanPJN</title>

    <!-- Farcaster Embed Meta Tags -->
    <meta name="fc:miniapp" content='{
      "version":"1",
      "imageUrl":"https://arb2048.vercel.app/assets/favicon.jpg",
      "button":{
        "title":"ðŸŽ® Play Now!",
        "action":{
          "type":"launch_miniapp",
          "name":"Arbitrum 2048",
          "url":"https://arb2048.vercel.app",
          "splashImageUrl":"https://arb2048.vercel.app/assets/favicon.ico",
          "splashBackgroundColor":"#11AAFE"
        }
      }
    }' />

    <meta name="fc:frame" content='{
      "version":"1",
      "imageUrl":"https://arb2048.vercel.app/assets/favicon.jpg",
      "button":{
        "title":"ðŸŽ® Play Now!",
        "action":{
          "type":"launch_frame",
          "name":"Arbitrum 2048",
          "url":"https://arb2048.vercel.app",
          "splashImageUrl":"https://arb2048.vercel.app/assets/favicon.ico",
          "splashBackgroundColor":"#11AAFE"
        }
      }
    }' />

    <!-- Style & Fonts -->
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@400;700&display=swap" rel="stylesheet" />

    <!-- ethers.js -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.14.3/dist/ethers.umd.min.js"></script>

    <!-- Farcaster SDK -->
    <script type="module">
      import { sdk } from 'https://esm.sh/@farcaster/miniapp-sdk';
      window.sdk = sdk;
      window.addEventListener("load", async () => {
        try {
          await sdk.actions.ready();
        } catch (err) {
          console.error("SDK Ready Error:", err);
        }
      });
    </script>
  </head>

  <body>
    <div class="container">
      <h1>Arbitrum 2048</h1>

      <div class="top-buttons-wrapper">
        <div class="button-group-left">
          <button class="button-63 connect-wallet" id="connectWalletBtn">ðŸ”— Connect Wallet</button>
          <button class="button-63 gm-button" id="gmButton">GM âœ¨</button>
        </div>
        <div id="score-display">Score: 0</div>
      </div>

      <div id="game"></div>

      <form id="scoreForm">
        <input type="text" id="playerName" placeholder="Enter your name" maxlength="16" required />
        <div class="bottom-buttons-wrapper">
          <button class="button-63 submit-score">Submit Score</button>
          <button class="button-63 connect-wallet" type="button" id="leaderboardToggle">Show Leaderboard</button>
        </div>
      </form>

      <div id="leaderboard" style="display: none;"></div>

      <footer class="footer">
        <p>
          Developed by <strong>ImanPJN</strong> âž¤ 
          <a href="https://github.com/imanpajand/Arb-48-Miniapp-on-Farcaster" target="_blank">GitHub</a> |
          <a href="https://x.com/imanpjnir" target="_blank">Twitter</a> |
          <a href="https://t.me/imanpjnir" target="_blank">Telegram</a>
        </p>
      </footer>
    </div>

    <audio autoplay loop>
      <source src="music/purple-chill.mp3" type="audio/mpeg" />
    </audio>

    <!-- Load your main app logic -->
    <script type="module" src="app.js"></script>
  </body>
</html>
